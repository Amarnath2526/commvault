import base64

# Base64 encoded script content
script_base64 = "aW1wb3J0IG9zCmltcG9ydCBqc29uCmltcG9ydCB0aW1lCmltcG9ydCByZQoKIyBGdW5jdGlvbiB0byBnZXQgdGhlIFVUQyBlcG9jaCB0aW1lIGZyb20gYSB0aW1lc3RhbXAgc3RyaW5nCmRlZiBnZXRfZXBvY2hfdGltZSh0aW1lc3RhbXAsIHRpbWVfZm9ybWF0PSIlbS8lZCAlSDolTTolUyIpOgogICAgcmV0dXJuIGludCh0aW1lLm1rdGltZSh0aW1lLnN0cnB0aW1lKHRpbWVzdGFtcCwgdGltZV9mb3JtYXQpKSkKCiMgRnVuY3Rpb24gdG8gZGV0ZWN0IGlzc3VlIGluIHRoZSBsb2cgZmlsZXMKZGVmIGRldGVjdF9pc3N1ZShsb2dfZm9sZGVyKToKICAgIGlzc3VlX25hbWUgPSAiU2hhcmVQb2ludCBSZXN0b3JlIFN0dWNrIgogICAgaXNzdWVfZGVzY3JpcHRpb24gPSAiQSBsYXJnZSBudW1iZXIgb2YgU2hhcmVQb2ludCBmaWxlcyB3ZXJlIGFjY2lkZW50YWxseSBkZWxldGVkLiBUaGUgcmVzdG9yZSBvcGVyYXRpb24gaXMgY3JpdGljYWwgdG8gYnVzaW5lc3Mgb3BlcmF0aW9ucy4iCiAgICBjb21tb25fc29sdXRpb24gPSAiQXV0aG9yaXplIHRoZSBBenVyZSBhcHAgdG8gcnVuIGJhY2t1cCBvciByZXN0b3JlIG9wZXJhdGlvbnMgZm9yIFNoYXJlUG9pbnQgT25saW5lIHNpdGVzLiIKICAgIAogICAgaXNzdWVfZGV0ZWN0ZWQgPSBGYWxzZQogICAgbG9nX2xpbmVzID0gW10KICAgIAogICAgIyBEZWZpbmUgYSByZWdleCBwYXR0ZXJuIHRvIGV4dHJhY3QgdGhlIHRpbWVzdGFtcAogICAgdGltZXN0YW1wX3BhdHRlcm4gPSByZS5jb21waWxlKHInXlxkezJ9L1xkezJ9IFxkezJ9OlxkezJ9OlxkezJ9JykKICAgIAogICAgIyBXYWxrIHRocm91Z2ggdGhlIGxvZyBmb2xkZXIgdG8gZmluZCBhbmQgYW5hbHl6ZSB0aGUgcmVsZXZhbnQgbG9nIGZpbGVzCiAgICBmb3Igcm9vdCwgXywgZmlsZXMgaW4gb3Mud2Fsayhsb2dfZm9sZGVyKToKICAgICAgICBmb3IgZmlsZSBpbiBmaWxlczoKICAgICAgICAgICAgaWYgZmlsZS5zdGFydHN3aXRoKCJDVlNQUmVzdG9yZUN0cmwiKToKICAgICAgICAgICAgICAgIGZpbGVfcGF0aCA9IG9zLnBhdGguam9pbihyb290LCBmaWxlKQogICAgICAgICAgICAgICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3InKSBhcyBmOgogICAgICAgICAgICAgICAgICAgIGZvciBsaW5lX251bWJlciwgbGluZSBpbiBlbnVtZXJhdGUoZiwgMSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICJpcyBtaXNzaW5nIHBlcm1pc3Npb25zIGZvciBTaXRlcyBBUElzIiBpbiBsaW5lIG9yICAgICAgICAgICAgICAgICAgICAgICAgICAgICJpcyBtaXNzaW5nIG1pbmltdW0gR3JhcGggcGVybWlzc2lvbnMgcmVxdWlyZWQiIGluIGxpbmUgb3IgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkluc3VmZmljaWVudCBwcml2aWxlZ2VzIHRvIGNvbXBsZXRlIHRoZSBvcGVyYXRpb24iIGluIGxpbmU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIEV4dHJhY3QgdGltZXN0YW1wcyBiYXNlZCBvbiBrbm93biB0b2tlbiBwb3NpdGlvbnMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VucyA9IGxpbmUuc3BsaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wID0gdG9rZW5zWzJdICsgIiAiICsgdG9rZW5zWzNdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXBvY2hfdGltZSA9IGdldF9lcG9jaF90aW1lKHRpbWVzdGFtcCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dfbGluZXMuYXBwZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImZpbGUiOiBmaWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibGluZU51bWJlciI6IGxpbmVfbnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidGltZXN0YW1wIjogZXBvY2hfdGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImxpbmUiOiBsaW5lLnN0cmlwKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlX2RldGVjdGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3IgYXMgZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIEhhbmRsZSB0aW1lc3RhbXAgcGFyc2luZyBlcnJvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYiVGltZXN0YW1wIHBhcnNpbmcgZXJyb3I6IHtlfSB8IExpbmU6IHtsaW5lLnN0cmlwKCl9IikKCiAgICByZXN1bHQgPSB7CiAgICAgICAgImhhc0lzc3VlIjogaXNzdWVfZGV0ZWN0ZWQsCiAgICAgICAgIm5hbWUiOiBpc3N1ZV9uYW1lLAogICAgICAgICJkZXNjcmlwdGlvbiI6IGlzc3VlX2Rlc2NyaXB0aW9uLAogICAgICAgICJzb2x1dGlvbiI6IGNvbW1vbl9zb2x1dGlvbiwKICAgICAgICAiZXNjYWxhdGlvbkVtYWlscyI6IFtdLAogICAgICAgICJleHRyYUluZm8iOiAiIiwKICAgICAgICAibG9nTGluZXMiOiBsb2dfbGluZXMKICAgIH0KICAgIAogICAgcmV0dXJuIHJlc3VsdAoKIyBQYXRoIHRvIHRoZSBmb2xkZXIgY29udGFpbmluZyB0aGUgbG9nIGZpbGVzCmxvZ19mb2xkZXJfcGF0aCA9ICcuJwoKIyBDYWxsIHRoZSBmdW5jdGlvbiBhbmQgcHJpbnQgdGhlIHJlc3VsdCBhcyBKU09OCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBpbXBvcnQgc3lzCiAgICBpZiBsZW4oc3lzLmFyZ3YpID4gMToKICAgICAgICBsb2dfZm9sZGVyX3BhdGggPSBzeXMuYXJndlsxXQogICAgcmVzdWx0ID0gZGV0ZWN0X2lzc3VlKGxvZ19mb2xkZXJfcGF0aCkKICAgIHByaW50KGpzb24uZHVtcHMocmVzdWx0LCBpbmRlbnQ9MikpCg=="

# Decode the base64 content and save it to a script file
script_content = base64.b64decode(script_base64).decode()
with open("sharepoint_restore_stuck.py", "w") as script_file:
	script_file.write(script_content)

print("The script has been successfully saved to 'sharepoint_restore_stuck.py'")
input("Press Enter to exit...")
